{"filter":false,"title":"rails.yml","tooltip":"/society_score/.github/workflows/rails.yml","undoManager":{"mark":6,"position":6,"stack":[[{"start":{"row":0,"column":0},"end":{"row":24,"column":45},"action":"remove","lines":["name: Rails CI/CD","","on:","  push:","    branches: [main]","","jobs:","  build:","    runs-on: ubuntu-latest","    steps:","    - uses: actions/checkout@v2","    - name: Deploy","      env:","        PRIVATE_KEY: ${{ secrets.PRIVATE_KEY }}","        USER_NAME: ${{ secrets.USER_NAME }}","        HOST_NAME: ${{ secrets.HOST_NAME }}","      run: |","        echo \"$PRIVATE_KEY\" > private_key && chmod 600 private_key","        ssh -o StrictHostKeyChecking=no -i private_key ${USER_NAME}@${HOST_NAME} 'cd アプリケーション名 &&","        git pull origin ブランチ名 &&","        ~/.rbenv/shims/bundle install &&","        ~/.rbenv/shims/bundle exec rails assets:precompile RAILS_ENV=production &&","        ~/.rbenv/shims/bundle exec rails db:migrate RAILS_ENV=production &&","        if [[ -e tmp/pids/puma.pid ]];then sudo kill $(cat tmp/pids/puma.pid); echo kill puma process;fi &&","        ~/.rbenv/shims/rails s -e production'"],"id":2},{"start":{"row":0,"column":0},"end":{"row":24,"column":45},"action":"insert","lines":["name: Rails CI/CD","","on:","  push:","    branches: [main]","","jobs:","  build:","    runs-on: ubuntu-latest","    steps:","    - uses: actions/setup-node@v3","    - name: Deploy ","      env:","        PRIVATE_KEY: ${{ secrets.PRIVATE_KEY }}","        USER_NAME: ${{ secrets.USER_NAME }}","        HOST_NAME: ${{ secrets.HOST_NAME }}","      run: |","        echo \"$PRIVATE_KEY\" > private_key && chmod 600 private_key","        ssh -o StrictHostKeyChecking=no -i private_key ${USER_NAME}@${HOST_NAME} 'cd アプリケーション名 &&","        git pull origin ブランチ名 &&","        ~/.rbenv/shims/bundle install &&","        ~/.rbenv/shims/bundle exec rails assets:precompile RAILS_ENV=production &&","        ~/.rbenv/shims/bundle exec rails db:migrate RAILS_ENV=production &&","        if [[ -e tmp/pids/puma.pid ]];then sudo kill $(cat tmp/pids/puma.pid); echo kill puma process;fi &&","        ~/.rbenv/shims/rails s -e production'"]}],[{"start":{"row":18,"column":85},"end":{"row":18,"column":94},"action":"remove","lines":["アプリケーション名"],"id":3},{"start":{"row":18,"column":85},"end":{"row":18,"column":86},"action":"insert","lines":["s"]},{"start":{"row":18,"column":86},"end":{"row":18,"column":87},"action":"insert","lines":["c"]}],[{"start":{"row":18,"column":86},"end":{"row":18,"column":87},"action":"remove","lines":["c"],"id":4}],[{"start":{"row":18,"column":86},"end":{"row":18,"column":87},"action":"insert","lines":["o"],"id":5},{"start":{"row":18,"column":87},"end":{"row":18,"column":88},"action":"insert","lines":["c"]},{"start":{"row":18,"column":88},"end":{"row":18,"column":89},"action":"insert","lines":["i"]},{"start":{"row":18,"column":89},"end":{"row":18,"column":90},"action":"insert","lines":["e"]},{"start":{"row":18,"column":90},"end":{"row":18,"column":91},"action":"insert","lines":["t"]},{"start":{"row":18,"column":91},"end":{"row":18,"column":92},"action":"insert","lines":["y"]}],[{"start":{"row":18,"column":92},"end":{"row":18,"column":93},"action":"insert","lines":["_"],"id":6},{"start":{"row":18,"column":93},"end":{"row":18,"column":94},"action":"insert","lines":["s"]},{"start":{"row":18,"column":94},"end":{"row":18,"column":95},"action":"insert","lines":["c"]},{"start":{"row":18,"column":95},"end":{"row":18,"column":96},"action":"insert","lines":["o"]},{"start":{"row":18,"column":96},"end":{"row":18,"column":97},"action":"insert","lines":["r"]},{"start":{"row":18,"column":97},"end":{"row":18,"column":98},"action":"insert","lines":["e"]}],[{"start":{"row":19,"column":28},"end":{"row":19,"column":29},"action":"remove","lines":["名"],"id":7},{"start":{"row":19,"column":27},"end":{"row":19,"column":28},"action":"remove","lines":["チ"]},{"start":{"row":19,"column":26},"end":{"row":19,"column":27},"action":"remove","lines":["ン"]},{"start":{"row":19,"column":25},"end":{"row":19,"column":26},"action":"remove","lines":["ラ"]},{"start":{"row":19,"column":24},"end":{"row":19,"column":25},"action":"remove","lines":["ブ"]}],[{"start":{"row":19,"column":24},"end":{"row":19,"column":25},"action":"insert","lines":["m"],"id":8},{"start":{"row":19,"column":25},"end":{"row":19,"column":26},"action":"insert","lines":["a"]},{"start":{"row":19,"column":26},"end":{"row":19,"column":27},"action":"insert","lines":["i"]},{"start":{"row":19,"column":27},"end":{"row":19,"column":28},"action":"insert","lines":["n"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":31,"selection":{"start":{"row":19,"column":28},"end":{"row":19,"column":28},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1679228243782,"hash":"78bd64bffa35eb963b024a70cabc479cea8c8146"}