{"filter":false,"title":"chats_controller.rb","tooltip":"/bookers2-debug/app/controllers/chats_controller.rb","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":1,"column":2},"end":{"row":2,"column":5},"action":"remove","lines":["def show","  end"],"id":2},{"start":{"row":1,"column":2},"end":{"row":26,"column":5},"action":"insert","lines":["def show","    @user = User.find(params[:id])","    rooms = current_user.user_rooms.pluck(:room_id)","    user_rooms = UserRoom.find_by(user_id: @user.id, room_id: rooms)","","    unless user_rooms.nil?","      @room = user_rooms.room","    else","      @room = Room.new","      @room.save","      UserRoom.create(user_id: current_user.id, room_id: @room.id)","      UserRoom.create(user_id: @user.id, room_id: @room.id)","    end","    @chats = @room.chats","    @chat = Chat.new(room_id: @room.id)","  end","  def create","    @chat = current_user.chats.new(chat_params)","    @chat.save","    redirect_to request.referer","  end","","  private","  def chat_params","    params.require(:chat).permit(:message, :room_id)","  end"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":11,"column":43},"end":{"row":11,"column":43},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1675660290219,"hash":"501d04b5cb1b01a636662f55cb8cf8366c891019"}